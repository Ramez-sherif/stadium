<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Register Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <style>
    .error{
      color:red;
    }
  </style>
  <body class="bg-gray-200">
    <!-- modify here for backend -->
    <form th:action="@{/auth/register}" th:object="${User}" method="POST" id="myForm">
      <div class="flex  justify-center  items-center h-screen ">
        <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col w-full md:w-2/3 lg:w-1/3">
          <!--data entry-->
          <div class="mb-4">
            <label class="block text-gray-700 font-bold mb-2 "> First Name </label>
            <input
       
              class="appearance-none border  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="firstName"
              name="fname"
              type="text"
              placeholder="First Name"
              th:field="*{firstName}"
              required
            />
            <span id = "fname-error-message" class="error-message hidden text-red-500"></span>
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 font-bold mb-2 ">
              Second Name
            </label>
            <input
    
              class="appearance-none border  rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="secondName"
              name="sname"
              type="text"
              placeholder="Second Name"
              th:field="*{secondName}"
              required
            />
            <span id="sname-error-message" class="error-message hidden text-red-500"></span>
          </div>
          <div class="mb-4">
            <label class="block text-gray-700 font-bold mb-2"> Email </label>
            <input
     
              class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="Email"              
              name="email"
              placeholder="Email"
              th:field="*{email}"
              required
            />
            <span id="email-error-message" class="error-message hidden text-red-500"></span>
          </div>
          <div class="mb-6">
            <label class="block text-gray-700 font-bold mb-2"> Password </label>
            <input

              class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="password"
              type="password"
              name="pass"
              placeholder="password"
              th:field="*{password}"
              required/>
              <span id="pass-error-message" class="error-message hidden text-red-500"></span>
          </div>
          <!--button-->
          <div class="flex  justify-center">
            <button type="button" onclick="validate();" class=" bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-12  rounded-full  focus:outline-none focus:shadow-outline">
              Sign up
            </button> 
          </div>
        </div>
      </div>
    </form>
  </body>
  <script>
    function validate(){
     if(validateForm()){
      document.getElementById("myForm").submit();
     };

    }
    function validateForm() {
      var check = true;
      var fname = document.forms["myForm"]["firstName"].value;
      var sname = document.forms["myForm"]["secondName"].value;
      var email = document.forms["myForm"]["Email"].value;
      var password = document.forms["myForm"]["password"].value;
      var FNameElem = document.getElementById("fname-error-message");
      var SNameElem = document.getElementById("sname-error-message");
      var emailElem = document.getElementById("email-error-message");
      var pass = document.getElementById("pass-error-message");
    
      // Define regular expressions
      var nameRegex = /^[a-zA-Z]{3,25}$/;
      var emailRegex = /\S+@\S+\.\S+/;
      var passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
    
      // Check if name matches the regex
      if (!fname.match(nameRegex) || fname== "" ) {
        FNameElem.innerHTML="Please enter a valid First Name";
        FNameElem.classList.remove("hidden");
        check = false;
      }else{
        FNameElem.classList.add("hidden");
      }
      if (!sname.match(nameRegex) || sname== "") {
        
        SNameElem.innerHTML="Please enter a valid Second Name";
        SNameElem.classList.remove("hidden");
        check = false;
      }else{
        SNameElem.classList.add("hidden");
      }
      // Check if email matches the regex
      if (!email.match(emailRegex)) {
        emailElem.innerHTML="Please enter a valid email address";
        emailElem.classList.remove("hidden");  
        check = false;
      }else{
        emailElem.classList.add("hidden");  
      }
      // Check if password matches the regex
      if (!password.match(passwordRegex)) {
        pass.innerHTML="Please enter a password that is at least 8 characters long and contains at least one letter and one number";
        pass.classList.remove("hidden");  
        check = false;
      }else{
        pass.classList.add("hidden");  
      }
    return check;
      
      
    }
    </script>
</html>
